#!/usr/bin/env python3

import os, subprocess

waybar_dir = '~/.config/waybar'
with_music  = f'{{ "include": [ "{waybar_dir}/layouts/with_music.jsonc" ] }}'
with_window = f'{{ "include": [ "{waybar_dir}/layouts/with_window.jsonc" ] }}' 

cfg_path = os.path.join(
    os.path.expanduser(waybar_dir), 'config.jsonc')

with open(cfg_path) as f:
    is_with_music = 'with_music' in f.read()

with open(cfg_path, 'w') as f:
    if is_with_music:
        f.write(with_window)
    else:
        f.write(with_music)

os.system('killall waybar')
subprocess.Popen('waybar')
